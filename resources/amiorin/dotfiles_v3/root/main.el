(let* ((zellij (getenv "ZELLIJ_SESSION_NAME"))
       (user (when zellij
               (downcase (car (split-string zellij "@")))))
       (root (or (projectile-project-root)
                 default-directory))
       (root (if (string= root "/")
                 "root"
               root))
       (root (if (string= root "/Users/amiorin/code/of/")
                 "of"
               root))
       (root (if (string= root "/Users/amiorin/code/personal/")
                 "personal"
               root))
       (root (if (string= root "/Users/amiorin/")
                 "~"
               root))
       (root (replace-regexp-in-string "/Users/amiorin/" "" root))
       (root (replace-regexp-in-string "code/of/" "" root))
       (root (replace-regexp-in-string "code/personal/" "" root))
       (xs (split-string root "/"))
       (xs (seq-filter (lambda (s) (not (string-empty-p s))) xs))
       (_ (seq-setq (xs p-user) (if (member (car xs) '("alberto" "facundo" "valery" "rafael"))
                                    (list (cdr xs) (car xs))
                                  (list xs user))))
       (xs (if (null xs)
               (list "workspaces" p-user)
             xs))
       (suffix (if (not (string= p-user user))
                   (format " (%s)" p-user)
                 ""))
       (tab-name (concat (string-join xs "/") suffix))
       (cmd (format "zellij action rename-tab \"%s\"" tab-name)))
  (list "update-tab-name" "*update-tab-name*" cmd))
